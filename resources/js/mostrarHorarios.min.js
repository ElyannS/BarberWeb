$(document).ready(function(){function i(a,e,o){$.ajax({url:"/BarberWeb/admin/mostrar_horarios",type:"POST",data:{data:a,tempoServico:e,idServico:o},dataType:"json",success:function(a){a=a.horarios;$(".itensHorarios").empty(),$.each(a,function(e,o){var a=`
                            <div class="item">
                                <div class="nomeBarbeiro">
                                    <img src="http://exclusivebarbershop.com.br/${o.foto_usuario}">
                                    <p>${e}</p>
                                </div>
                                <div class="horariosBarbeiros" id="pegaDados">
                                    ${o.horarios.map(a=>`<span class="span" value="${e},${o.idBarbeiro},${o.idServico},${o.data},${o.nomeServico},${a}">${a}</span>`).join("")}
                                </div>
                            </div>
                        `;$(".itensHorarios").append(a)})},error:function(a,e,o){if(a.responseText)try{var r=JSON.parse(a.responseText);r.hasOwnProperty("error")?alert("Erro: "+r.error):alert("Ocorreu um erro na requisição.")}catch(a){alert("Ocorreu um erro na requisição: "+o)}else alert("Ocorreu um erro na requisição: "+o)}})}"/BarberWeb/admin/agenda-cliente"===window.location.pathname&&($("#mostrarHorarios").on("click",function(){var a,e=$("#dataCliente").val(),o=$("#servicoCliente").val(),r=($("#valueIn").val("CHANGE"),new Date((new Date).toLocaleString("en-US",{timeZone:"America/Sao_Paulo"})));r.setHours(0,0,0,0),e<r.toISOString().split("T")[0]?(a="<p>Selecione uma data válida!</p>",$(".alertaAviso").empty(),$(".alertaAviso").append(a),$(".alertaAviso").addClass("mostrar"),setTimeout(function(){$(".alertaAviso").removeClass("mostrar"),$(".alertaAviso").empty()},5e3)):"sel"===o?(a="<p>Selecione um serviço!</p>",$(".alertaAviso").empty(),$(".alertaAviso").append(a),$(".alertaAviso").addClass("mostrar"),setTimeout(function(){$(".alertaAviso").removeClass("mostrar"),$(".alertaAviso").empty()},5e3)):i(e,(r=o.split(";"))[0],r[1])}),$("#servicoCliente").change(function(){var a,e,o,r;"CHANGE"==$("#valueIn").val()&&(a=$("#dataCliente").val(),e=$("#servicoCliente").val(),(r=new Date((new Date).toLocaleString("en-US",{timeZone:"America/Sao_Paulo"}))).setHours(0,0,0,0),a<r.toISOString().split("T")[0]?(o="<p>Selecione uma data válida!</p>",$(".alertaAviso").empty(),$(".alertaAviso").append(o),$(".alertaAviso").addClass("mostrar"),setTimeout(function(){$(".alertaAviso").removeClass("mostrar"),$(".alertaAviso").empty()},5e3)):"sel"===e?(o="<p>Selecione um serviço!</p>",$(".alertaAviso").empty(),$(".alertaAviso").append(o),$(".alertaAviso").addClass("mostrar"),setTimeout(function(){$(".alertaAviso").removeClass("mostrar"),$(".alertaAviso").empty()},5e3)):i(a,(r=e.split(";"))[0],r[1]))}),$(document).on("click","#pegaDados span",function(){var a=$(this).attr("value"),[a,e,o,r,i,t]=($(".clienteAgenda").css("position","fixed"),$("body.admin .index").toggleClass("activeAgenda"),a.split(","));$("#nomeBarber").val(a),$("#idBaber").val(e),$("#nomeSevico").val(i),$("#idServ").val(o),$("#dataAgen").val(r),$("#agendData").val(r),$("#horarioAgen").val(t),$("#horarioA").val(t)}),$(".closeAgenda").on("click",function(){$("body.admin .index").toggleClass("activeAgenda"),$(".agenda").css("position","initial")}))});